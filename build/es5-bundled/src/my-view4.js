define(["meta","./my-app.js"],function(meta,_myApp){"use strict";meta=babelHelpers.interopRequireWildcard(meta);function _templateObject2_b6609ef0804e11e8814dc536b46d9113(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"shared-styles iron-flex iron-flex-alignment\">\n        :host {\n          display: block;\n\n          padding: 10px;\n        }\n        plastic-resize-aware {\n          min-width: 20%;\n        }\n        .codetext {\n          font-family: 'Courier New', Courier, monospace;\n          color: black;\n          font-weight: bold;\n          background-color: #f9f8f7;\n        }\n        @keyframes shrinkIt {\n          from {width: 800px;}\n          to {width: 500px;}\n        }\n        .doShrinkIt {\n          animation-name: shrinkIt;\n          animation-duration: 12s;\n        }\n        .demoarea {\n          width: 800px; \n          max-width: 100%; \n          min-height: 80px;\n        }\n        .participants {\n          @apply(--layout-flex-4);\n        }\n        .converse {\n          @apply(--layout-flex-8);\n        }\n        .participant {\n          padding: 8px;\n        }\n        .participantPic {\n          width: 80px;\n          height: 80px;\n        }\n        .participantNameGroup {\n          @apply(--layout-vertical);\n          padding-left: 8px;\n          padding-right: 8px;\n        }\n        .participantName {\n          font-size: 14pt;\n          font-weight: bold;\n        }\n        .participantTagLine {\n          font-size: 11pt;\n          font-weight: normal;\n          font-style: italic;\n        }\n        .msmall plastic-image {\n          width: 60px;\n          height: 60px;\n        }\n        .msmall .participantName {\n          font-size: 12pt;\n        }\n        .msmall .participantTagLine {\n          font-size: 10pt;\n        }\n        .vsmall plastic-image {\n          width: 40px;\n          height: 40px;\n        }\n        .vsmall .participantName {\n          font-size: 11pt;\n        }\n        .vsmall .participantTagLine {\n          font-size: 9pt;\n        }\n        .xsmall plastic-image {\n          display: none;\n        }\n        .xsmall .participantName {\n          font-size: 10.5pt;\n        }\n        .xsmall .participantTagLine {\n          font-size: 8pt;\n        }\n        .c2green {\n          color: green;\n        }\n      </style>\n      <h2>plastic-element-query</h2>\n      <p><span class=\"codetext\">plastic-element-query</span> is part of the <span class=\"codetext\">plastic-resize-aware</span> package.\n      It is a non visual element that allows you to use CSS media query style\nexpressions as **element queries** to apply and remove CSS classes on a target element. </p>\n<p>The idea with <span class=\"codetext\">plastic-element-query</span> is that there is a <i>reference element</i> which must be a \n<span class=\"codetext\">plastic-resize-aware</span> element, who's size is monitored.  There is also a <i>target element</i>\nwhich can be the same as the reference element or a different element.  The target element\nis changed by modifying its <span class=\"codetext\">classList</span> depending on the <span class=\"codetext\">queryExpression</span> \nmatching or not matching the reference element's size.</p>\n<h3>Demo</h3>\n<paper-button raised on-tap=\"_reset\" disabled$=\"[[_isRunning]]\">Start / Restart Demo</paper-button>\n<br>\n      <div id=\"demoContainer\" class=\"demoarea layout horizontal\">\n          <div class=\"participants\">\n            <plastic-resize-aware id=\"ra1\" >\n              <template is=\"dom-repeat\" items=\"[[participantList]]\" as=\"p\">\n              <div class=\"participant layout horizontal\">\n                <plastic-image class=\"participantPic\" sizing=\"contain\" srcset=\"[[p.pic]]\">\n                </plastic-image>\n                <div class=\"participantNameGroup\">\n                  <div class=\"participantName\">[[p.name]]</div>\n                  <div class=\"participantTagLine\">[[p.tagline]]</div>\n                </div>\n              </div>\n              </template>\n              <plastic-element-query id=\"peqMsmall\" query-expression=\"(max-width: 240px) and (min-width: 210px)\" \n                assign-classes=\"msmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n              <plastic-element-query id=\"peqVsmall\" query-expression=\"(max-width: 210px) and (min-width: 180px)\" \n                assign-classes=\"vsmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n              <plastic-element-query id=\"peqXsmall\" query-expression=\"(max-width: 180px)\" \n                assign-classes=\"xsmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n              <plastic-element-query id=\"peqC2green\" query-expression=\"(max-width: 180px)\" \n                assign-classes=\"c2green\" on-element-query-match=\"logMatch\"\n                target-element=\"col2info\"></plastic-element-query>\n            </plastic-resize-aware>\n          </div>\n          <div id=\"col2info\" class=\"converse\">\n            <ul id=\"chglist\">\n              <template is=\"dom-repeat\" items=\"[[peqLog]]\" as=\"l\">\n                <li>[[l.src]] - [[l.matches]]</li>\n              </template>\n            </ul>\n            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean luctus hendrerit vehicula. Sed nec erat posuere, elementum neque in, sollicitudin odio. Aliquam imperdiet metus vel tortor porttitor suscipit. Quisque congue accumsan mauris, id molestie magna ornare at. Phasellus lacinia urna at libero tempor volutpat. Duis molestie turpis est, non sollicitudin turpis pretium vel. Nulla non molestie nulla, eu dignissim sem.</p>\n          </div>\n        </div>\n        \n      \n    <div id=\"sources\"></div>\n    "]);_templateObject2_b6609ef0804e11e8814dc536b46d9113=function(){return data};return data}function _templateObject_b6609ef0804e11e8814dc536b46d9113(){var data=babelHelpers.taggedTemplateLiteral(["\n        <style>\n          :host {\n            display: none;\n          }\n        </style>\n        <slot></slot>\n      "]);_templateObject_b6609ef0804e11e8814dc536b46d9113=function(){return data};return data}var bundledImportMeta=babelHelpers.objectSpread({},meta,{url:new URL("../node_modules/plastic-resize-aware/plastic-element-query.js",meta.url).href}),PlasticElementQuery=function(_PolymerElement){babelHelpers.inherits(PlasticElementQuery,_PolymerElement);function PlasticElementQuery(){babelHelpers.classCallCheck(this,PlasticElementQuery);return babelHelpers.possibleConstructorReturn(this,(PlasticElementQuery.__proto__||Object.getPrototypeOf(PlasticElementQuery)).apply(this,arguments))}babelHelpers.createClass(PlasticElementQuery,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(PlasticElementQuery.prototype.__proto__||Object.getPrototypeOf(PlasticElementQuery.prototype),"connectedCallback",this).call(this);if(!this._refElement){this._refElement=this._getDefaultParent()}if(!this._targetElement){this._targetElement=this._getDefaultParent()}}},{key:"disconnectedCallback",value:function disconnectedCallback(){babelHelpers.get(PlasticElementQuery.prototype.__proto__||Object.getPrototypeOf(PlasticElementQuery.prototype),"disconnectedCallback",this).call(this);if(this._refElement){this._refElement.removeEventListener("element-resize",this._handleResize)}}},{key:"_getDefaultParent",value:function _getDefaultParent(){var currentElem=this,currentTag=this.tagName;while("PLASTIC-RESIZE-AWARE"!==currentTag){currentElem=currentElem.parentElement;if(!currentElem||"BODY"==currentElem.tagName){return null}currentTag=currentElem.tagName}return currentElem}},{key:"_targetElementChanged",value:function _targetElementChanged(newValue){if(newValue){if("object"==babelHelpers.typeof(newValue)){this._targetElement=newValue}else{if("string"==typeof newValue){var te=this._getElementFromParents(newValue);if(te){this._targetElement=te}else{console.error("Target element \""+newValue+"\" not found.")}}}}}},{key:"_getElementFromParents",value:function _getElementFromParents(id,tagName){var p=this.parentElement,t=p?p.querySelector((tagName?tagName.toLowerCase():"")+"#"+id):null;while(p&&!t){p=p.parentElement;t=p?p.querySelector((tagName?tagName.toLowerCase():"")+"#"+id):null}return t}},{key:"_refElementChanged",value:function _refElementChanged(newValue){if(newValue){if("object"==babelHelpers.typeof(newValue)){if(newValue&&newValue.tagName&&"PLASTIC-RESIZE-AWARE"==newValue.tagName){this._refElement=newValue}else{console.log("Reference element is not plastic-resize-aware")}}else{if("string"==typeof newValue){var te=document.getElementById(newValue);if(te&&te.tagName&&"PLASTIC-RESIZE-AWARE"==te.tagName){this._refElement=te}else{console.error("Reference element \""+newValue+"\" not found or is not plastic-resize-aware.")}}}}}},{key:"_refSizeChanged",value:function _refSizeChanged(newValue){if(newValue&&newValue.hasOwnProperty("width")&&newValue.hasOwnProperty("height")){if(this.queryExpression){var m=this._matchQuery(this.queryExpression,{type:"screen",width:newValue.width+"px",height:newValue.height+"px"});if(m!==this.isMatching){this._setIsMatching(m)}}}else{if(this.isMatching){this._setIsMatching(!1)}}}},{key:"_isMatchingChanged",value:function _isMatchingChanged(newValue,oldValue){if(newValue&&!oldValue){if(this.assignClasses&&this._targetElement){var _this$_targetElement$,clist=this.assignClasses.split(" ").filter(function(e){return 0<e.length});(_this$_targetElement$=this._targetElement.classList).add.apply(_this$_targetElement$,babelHelpers.toConsumableArray(clist))}this.dispatchEvent(new CustomEvent("element-query-match",{detail:{queryExpression:this.queryExpression,matches:!0,targetElement:this._targetElement,classList:this.assignClasses,width:newValue.width,height:newValue.height}}))}if(!newValue&&oldValue){if(this.assignClasses&&this._targetElement){var _this$_targetElement$2,_clist=this.assignClasses.split(" ").filter(function(e){return 0<e.length});(_this$_targetElement$2=this._targetElement.classList).remove.apply(_this$_targetElement$2,babelHelpers.toConsumableArray(_clist))}this.dispatchEvent(new CustomEvent("element-query-match",{detail:{queryExpression:this.queryExpression,matches:!1,targetElement:this._targetElement,classList:this.assignClasses,width:newValue.width,height:newValue.height}}))}}},{key:"_refElementRefChanged",value:function _refElementRefChanged(newValue,oldValue){if(oldValue){oldValue.removeEventListener("element-resize",this._handleResize)}if(newValue){newValue.addEventListener("element-resize",this._handleResize.bind(this))}}},{key:"_targetElementRefChanged",value:function _targetElementRefChanged(){}},{key:"_handleResize",value:function _handleResize(e){this._refElementSize={width:e.detail.width,height:e.detail.height}}},{key:"_parseQuery",value:function _parseQuery(mediaQuery){var RE_MEDIA_QUERY=/^(?:(only|not)?\s*([_a-z][_a-z0-9-]*)|(\([^\)]+\)))(?:\s*and\s*(.*))?$/i,RE_MQ_EXPRESSION=/^\(\s*([_a-z-][_a-z0-9-]*)\s*(?:\:\s*([^\)]+))?\s*\)$/,RE_MQ_FEATURE=/^(?:(min|max)-)?(.+)/;return mediaQuery.split(",").map(function(query){query=query.trim();var captures=query.match(RE_MEDIA_QUERY);if(!captures){throw new SyntaxError("Invalid CSS media query: \""+query+"\"")}var modifier=captures[1],type=captures[2],expressions=((captures[3]||"")+(captures[4]||"")).trim(),parsed={};parsed.inverse=!!modifier&&"not"===modifier.toLowerCase();parsed.type=type?type.toLowerCase():"all";if(!expressions){parsed.expressions=[];return parsed}expressions=expressions.match(/\([^\)]+\)/g);if(!expressions){throw new SyntaxError("Invalid CSS media query: \""+query+"\"")}parsed.expressions=expressions.map(function(expression){var captures=expression.match(RE_MQ_EXPRESSION);if(!captures){throw new SyntaxError("Invalid CSS media query: \""+query+"\"")}var feature=captures[1].toLowerCase().match(RE_MQ_FEATURE);return{modifier:feature[1],feature:feature[2],value:captures[2]}});return parsed})}},{key:"_matchQuery",value:function _matchQuery(mediaQuery,values){var _this=this;return this._parseQuery(mediaQuery).some(function(query){var inverse=query.inverse,typeMatch="all"===query.type||values.type===query.type;if(typeMatch&&inverse||!(typeMatch||inverse)){return!1}var expressionsMatch=query.expressions.every(function(expression){var feature=expression.feature,modifier=expression.modifier,expValue=expression.value,value=values[feature];if(!value){return!1}switch(feature){case"orientation":case"scan":return value.toLowerCase()===expValue.toLowerCase();case"width":case"height":case"device-width":case"device-height":expValue=_this._toPx(expValue);value=_this._toPx(value);break;case"resolution":expValue=_this._toDpi(expValue);value=_this._toDpi(value);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":expValue=_this._toDecimal(expValue);value=_this._toDecimal(value);break;case"grid":case"color":case"color-index":case"monochrome":expValue=parseInt(expValue,10)||1;value=parseInt(value,10)||0;break;}switch(modifier){case"min":return value>=expValue;case"max":return value<=expValue;default:return value===expValue;}});return expressionsMatch&&!inverse||!expressionsMatch&&inverse})}},{key:"_toDecimal",value:function _toDecimal(ratio){var decimal=+ratio,numbers;if(!decimal){numbers=ratio.match(/^(\d+)\s*\/\s*(\d+)$/);decimal=numbers[1]/numbers[2]}return decimal}},{key:"_toDpi",value:function _toDpi(resolution){var RE_RESOLUTION_UNIT=/(dpi|dpcm|dppx)?\s*$/,value=parseFloat(resolution),units=(resolution+"").match(RE_RESOLUTION_UNIT)[1];switch(units){case"dpcm":return value/2.54;case"dppx":return 96*value;default:return value;}}},{key:"_toPx",value:function _toPx(length){var RE_LENGTH_UNIT=/(em|rem|px|cm|mm|in|pt|pc)?\s*$/,value=parseFloat(length),units=(length+"").match(RE_LENGTH_UNIT)[1];switch(units){case"em":return 16*value;case"rem":return 16*value;case"cm":return 96*value/2.54;case"mm":return 96*value/2.54/10;case"in":return 96*value;case"pt":return 72*value;case"pc":return 72*value/12;default:return value;}}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject_b6609ef0804e11e8814dc536b46d9113())}},{key:"properties",get:function get(){return{targetElement:{type:Object,value:null,observer:"_targetElementChanged"},refElement:{type:Object,value:null,observer:"_refElementChanged"},queryExpression:{type:String},assignClasses:{type:String},isMatching:{type:Boolean,readOnly:!0,value:!1,observer:"_isMatchingChanged"},_refElementSize:{type:Object,value:null,observer:"_refSizeChanged"},_refElement:{type:Object,observer:"_refElementRefChanged"},_targetElement:{type:Object,observer:"_targetElementRefChanged"}}}},{key:"importMeta",get:function get(){return bundledImportMeta}}]);return PlasticElementQuery}(_myApp.PolymerElement);window.customElements.define("plastic-element-query",PlasticElementQuery);var MyView4=function(_GestureEventListener){babelHelpers.inherits(MyView4,_GestureEventListener);function MyView4(){babelHelpers.classCallCheck(this,MyView4);return babelHelpers.possibleConstructorReturn(this,(MyView4.__proto__||Object.getPrototypeOf(MyView4)).apply(this,arguments))}babelHelpers.createClass(MyView4,[{key:"connectedCallback",value:function connectedCallback(){var _this2=this;babelHelpers.get(MyView4.prototype.__proto__||Object.getPrototypeOf(MyView4.prototype),"connectedCallback",this).call(this);this.participantList=[{name:"Underdog",tagline:"There's no need to fear.",pic:"./images/underdog.jpg"},{name:"The Jetsons",pic:"./images/Jetsons.jpg",tagline:"You've got to meet us"},{name:"Bad Wolf",pic:"./images/badwolf.jpg",tagline:"Why you call me bad?"}];setTimeout(function(){_this2._showSource()},1e3)}},{key:"logResize",value:function logResize(e){var li=document.createElement("li");li.innerHTML="Changed to "+e.detail.width+" x "+e.detail.height;this.$.chglist.appendChild(li)}},{key:"trigChanged",value:function trigChanged(o,n){if(!this._isRunning&&n){this.doChanges()}}},{key:"testGetElem",value:function testGetElem(id,el){var p=el.parentElement,t=p?p.querySelector("#"+id):null;while(p&&!t){p=p.parentElement;t=p?p.querySelector("#"+id):null}return t}},{key:"_reset",value:function _reset(){var _this3=this;this.peqLog=[];this._isRunning=!0;this.$.demoContainer.style.animation="none";this.$.demoContainer.offsetHeight;this.$.demoContainer.style.animation=null;this.$.demoContainer.classList.add("doShrinkIt");setTimeout(function(){_this3._isRunning=!1},13e3)}},{key:"logMatch",value:function logMatch(e){var d=e.detail;this.push("peqLog",{src:e.target.id,matches:d.matches?"match":"no match"})}},{key:"_showSource",value:function _showSource(){var mapMarkup=hljs.highlight("xml","\n    <div id=\"demoContainer\" class=\"demoarea layout horizontal\">\n      <div class=\"participants\">\n        <plastic-resize-aware id=\"ra1\" >\n          <template is=\"dom-repeat\" items=\"[[participantList]]\" as=\"p\">\n          <div class=\"participant layout horizontal\">\n            <plastic-image class=\"participantPic\" sizing=\"contain\" srcset=\"[[p.pic]]\">\n            </plastic-image>\n            <div class=\"participantNameGroup\">\n              <div class=\"participantName\">[[p.name]]</div>\n              <div class=\"participantTagLine\">[[p.tagline]]</div>\n            </div>\n          </div>\n          </template>\n          <plastic-element-query id=\"peqMsmall\" query-expression=\"(max-width: 240px) and (min-width: 210px)\" \n            assign-classes=\"msmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n          <plastic-element-query id=\"peqVsmall\" query-expression=\"(max-width: 210px) and (min-width: 180px)\" \n            assign-classes=\"vsmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n          <plastic-element-query id=\"peqXsmall\" query-expression=\"(max-width: 180px)\" \n            assign-classes=\"xsmall\" on-element-query-match=\"logMatch\"></plastic-element-query>\n          <plastic-element-query id=\"peqC2green\" query-expression=\"(max-width: 180px)\" \n            assign-classes=\"c2green\" on-element-query-match=\"logMatch\"\n            target-element=\"col2info\"></plastic-element-query>\n        </plastic-resize-aware>\n      </div>\n      <div id=\"col2info\" class=\"converse\">\n        <ul id=\"chglist\">\n          <template is=\"dom-repeat\" items=\"[[peqLog]]\" as=\"l\">\n            <li>[[l.src]] - [[l.matches]]</li>\n          </template>\n        </ul>\n        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean luctus hendrerit vehicula. Sed nec erat posuere, elementum neque in, sollicitudin odio. Aliquam imperdiet metus vel tortor porttitor suscipit. Quisque congue accumsan mauris, id molestie magna ornare at. Phasellus lacinia urna at libero tempor volutpat. Duis molestie turpis est, non sollicitudin turpis pretium vel. Nulla non molestie nulla, eu dignissim sem.</p>\n      </div>\n    </div>\n    ");this.$.sources.innerHTML="\n    <h3>Markup</h3>\n    <p>In this example the first 3 <span class=\"codetext\">plastic-element-query</span> elements use \n    the default reference and target element - the parent <span class=\"codetext\">plastic-resize-aware</span>. The last \n    <span class=\"codetext\">plastic-element-query</span> specifies the target as <span class=\"codetext\">col2info</span>\n    so when that one matches the class <span class=\"codetext\">c2green</span> will be applied to\n    <span class=\"codetext\">div#col2info</span></p>\n    <pre><code class=\"html\">".concat(mapMarkup.value,"</code></pre>");var cssCode=hljs.highlight("css","\n    .msmall plastic-image {\n      width: 60px;\n      height: 60px;\n    }\n    .msmall .participantName {\n      font-size: 12pt;\n    }\n    .msmall .participantTagLine {\n      font-size: 10pt;\n    }\n    .vsmall plastic-image {\n      width: 40px;\n      height: 40px;\n    }\n    .vsmall .participantName {\n      font-size: 11pt;\n    }\n    .vsmall .participantTagLine {\n      font-size: 9pt;\n    }\n    .xsmall plastic-image {\n      display: none;\n    }\n    .xsmall .participantName {\n      font-size: 10.5pt;\n    }\n    .xsmall .participantTagLine {\n      font-size: 8pt;\n    }\n    .c2green {\n      color: green;\n    }\n    ");this.$.sources.innerHTML+="<h3>CSS</h3>\n    <pre><code class=\"css\">".concat(cssCode.value,"</code></pre>");var jsCode=hljs.highlight("javascript","\n  /**\n   * Handle on-element-query-match event\n   */\n  logMatch(e) {\n    this.push('peqLog', {\n      src: e.target.id,\n      matches: e.detail.matches ? \"match\" : \"no match\"\n    });\n  }\n    ");this.$.sources.innerHTML+="<h3>Javascript</h3>\n    <pre><code class=\"javascript\">".concat(jsCode.value,"</code></pre>")}}],[{key:"template",get:function get(){return(0,_myApp.html)(_templateObject2_b6609ef0804e11e8814dc536b46d9113())}},{key:"properties",get:function get(){return{participantList:{type:Array,notify:!0},peqLog:{type:Array,notify:!0,value:function value(){return[]}},_isRunning:{type:Boolean,value:!1}}}}]);return MyView4}((0,_myApp.GestureEventListeners)(_myApp.PolymerElement));window.customElements.define("my-view4",MyView4)});